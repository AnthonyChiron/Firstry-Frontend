<card
  color="secondary"
  [subCard]="true"
  (btnClicked)="edit = !edit"
  class="main"
>
  <form [formGroup]="form">
    <div class="header" *ngIf="rules">
      <input-title
        name="name"
        formControlName="name"
        [edit]="edit"
        [error]="
          touched &&
          (fus.isFieldInvalid('name') || form.get('name').value == '')
        "
      ></input-title>
      <btn
        *ngIf="!edit"
        type="transparent"
        icon="fa-solid fa-pen-to-square"
        (click)="edit = !edit"
      ></btn>
      <btn
        *ngIf="edit"
        type="transparent"
        label="Supprimer"
        (click)="edit = !edit"
      ></btn>
    </div>
    <div class="content">
      <div class="infos">
        <input-text
          name="name"
          formControlName="name"
          placeholder="Nom..."
          label="Nom"
          [edit]="edit"
          [error]="
            touched &&
            (fus.isFieldInvalid('name') || form.get('name').value == '')
          "
        ></input-text>
        <input-textarea
          name="description"
          formControlName="description"
          placeholder="Description..."
          label="Description"
          size="xs"
          [edit]="edit"
          [error]="
            touched &&
            (fus.isFieldInvalid('description') ||
              form.get('description').value == '')
          "
        ></input-textarea>
      </div>
      <div class="sep"></div>
      <div class="format">
        <contest-rules-format-form
          [edit]="edit"
          [stepFormats]="form.value.format"
        ></contest-rules-format-form>
      </div>
    </div>
  </form>
  <div class="footer" *ngIf="edit">
    <btn
      type="danger"
      label="Annuler"
      icon="fa-solid fa-xmark"
      (click)="cancel()"
    ></btn>
    <btn label="Valider" icon="fa-solid fa-check" (click)="submit()"></btn>
  </div>
</card>
